<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LINE è¨Šæ¯æ¨æ’­</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --purple: #7c3aed; --purple-light: #ede9fe; --text: #1a1a2e;
  --sub: #6b7280; --border: #e5e7eb; --bg: #f3f4f6; --white: #fff;
  --green: #10b981; --red: #ef4444; --line: #06c755; --radius: 10px;
}
body { font-family: 'Noto Sans TC', sans-serif; background: var(--bg); color: var(--text); padding: 20px; }

.header { margin-bottom: 24px; }
.header h2 { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
.header p { font-size: 14px; color: var(--sub); }

/* Stats */
.stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }
.stat-card { background: white; border-radius: var(--radius); padding: 20px; border: 1px solid var(--border); }
.stat-label { font-size: 13px; color: var(--sub); margin-bottom: 6px; }
.stat-value { font-size: 28px; font-weight: 700; color: var(--line); }

/* Layout */
.content-grid { display: grid; grid-template-columns: 1fr 400px; gap: 20px; }
.main-section { background: white; border-radius: var(--radius); padding: 24px; border: 1px solid var(--border); }
.preview-section { background: white; border-radius: var(--radius); padding: 24px; border: 1px solid var(--border); position: sticky; top: 20px; }

/* Form */
.form-group { margin-bottom: 20px; }
.form-label { display: block; font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 8px; }
.form-input { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: var(--radius); font-size: 14px; font-family: inherit; }
.form-input:focus { outline: none; border-color: var(--line); }
.form-textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: var(--radius); font-size: 14px; font-family: inherit; min-height: 150px; resize: vertical; }
.form-select { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: var(--radius); font-size: 14px; }

/* Recipient Selector */
.recipient-chips { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
.chip { padding: 6px 12px; background: var(--line); color: white; border-radius: 20px; font-size: 13px; cursor: pointer; border: 2px solid var(--line); transition: all .2s; }
.chip:hover { background: #05a647; border-color: #05a647; }
.chip.outline { background: white; color: var(--line); }
.chip.outline:hover { background: var(--line); color: white; }

/* Template Selector */
.template-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; margin-top: 8px; }
.template-card { padding: 16px; border: 2px solid var(--border); border-radius: var(--radius); cursor: pointer; text-align: center; transition: all .2s; }
.template-card:hover { border-color: var(--line); background: #f0fdf4; }
.template-card.active { border-color: var(--line); background: #d1fae5; }
.template-icon { font-size: 24px; margin-bottom: 8px; }
.template-name { font-size: 13px; font-weight: 500; }

/* Preview */
.preview-title { font-size: 16px; font-weight: 600; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid var(--border); }
.phone-mockup { background: #f9fafb; border-radius: 30px; padding: 50px 20px; border: 10px solid #1a1a2e; box-shadow: 0 4px 24px rgba(0,0,0,0.1); }
.message-bubble { background: var(--line); color: white; padding: 12px 16px; border-radius: 18px; margin-bottom: 12px; font-size: 14px; line-height: 1.6; word-wrap: break-word; }
.message-meta { font-size: 11px; color: var(--sub); text-align: right; margin-top: 4px; }

/* Buttons */
.btn { padding: 12px 24px; border-radius: var(--radius); font-size: 14px; font-weight: 500; cursor: pointer; border: none; font-family: inherit; transition: all .15s; }
.btn-primary { background: var(--line); color: white; }
.btn-primary:hover { background: #05a647; }
.btn-secondary { background: var(--sub); color: white; }
.btn-block { width: 100%; }

/* History Table */
.table-wrap { background: white; border-radius: var(--radius); border: 1px solid var(--border); overflow: hidden; margin-top: 24px; }
.table-wrap table { width: 100%; border-collapse: collapse; }
.table-wrap th { background: #f9fafb; padding: 12px 16px; text-align: left; font-size: 12px; color: var(--sub); font-weight: 600; border-bottom: 1px solid var(--border); }
.table-wrap td { padding: 14px 16px; font-size: 13px; border-bottom: 1px solid #f3f4f6; }
.table-wrap tr:last-child td { border-bottom: none; }
.table-wrap tr:hover td { background: #fafafa; }

.badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 12px; font-weight: 500; }
.badge-sent { background: #d1fae5; color: #065f46; }
.badge-pending { background: #fef3c7; color: #92400e; }
.badge-failed { background: #fee2e2; color: #991b1b; }

@media (max-width: 1200px) {
  .content-grid { grid-template-columns: 1fr; }
  .preview-section { position: static; }
}
</style>
</head>
<body>

<div class="header">
  <h2>LINE è¨Šæ¯æ¨æ’­</h2>
  <p>ç™¼é€èª²ç¨‹é€šçŸ¥ã€ç¹³è²»æé†’çµ¦å­¸ç”Ÿèˆ‡å®¶é•·</p>
</div>

<div class="stats">
  <div class="stat-card">
    <div class="stat-label">æœ¬æœˆç™¼é€</div>
    <div class="stat-value" id="monthSent">0</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">ä»Šæ—¥ç™¼é€</div>
    <div class="stat-value" id="todaySent">0</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">æˆåŠŸç‡</div>
    <div class="stat-value" id="successRate">100%</div>
  </div>
</div>

<div class="content-grid">
  <!-- Main Form -->
  <div class="main-section">
    <form id="messageForm" onsubmit="sendMessage(event)">
      <div class="form-group">
        <label class="form-label">è¨Šæ¯ç¯„æœ¬</label>
        <div class="template-grid">
          <div class="template-card active" onclick="selectTemplate('custom')">
            <div class="template-icon">âœï¸</div>
            <div class="template-name">è‡ªè¨‚è¨Šæ¯</div>
          </div>
          <div class="template-card" onclick="selectTemplate('class')">
            <div class="template-icon">ğŸ“š</div>
            <div class="template-name">ä¸Šèª²é€šçŸ¥</div>
          </div>
          <div class="template-card" onclick="selectTemplate('payment')">
            <div class="template-icon">ğŸ’°</div>
            <div class="template-name">ç¹³è²»æé†’</div>
          </div>
          <div class="template-card" onclick="selectTemplate('event')">
            <div class="template-icon">ğŸ‰</div>
            <div class="template-name">æ´»å‹•é€šçŸ¥</div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">ç™¼é€å°è±¡</label>
        <div class="recipient-chips">
          <div class="chip" onclick="selectRecipient('all')">å…¨éƒ¨å­¸ç”Ÿ</div>
          <div class="chip outline" onclick="selectRecipient('active')">åœ¨å­¸å­¸ç”Ÿ</div>
          <div class="chip outline" onclick="selectRecipient('custom')">æŒ‡å®šå­¸ç”Ÿ</div>
        </div>
        <select class="form-select" id="studentSelect" style="display:none; margin-top:12px;" multiple>
          <option value="1">å¼µå°æ˜</option>
          <option value="2">æå°è¯</option>
          <option value="3">ç‹å¤§æ˜</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">è¨Šæ¯ä¸»æ—¨</label>
        <input class="form-input" id="subject" placeholder="ä¾‹ï¼šæœ¬é€±èª²ç¨‹æé†’" required>
      </div>

      <div class="form-group">
        <label class="form-label">è¨Šæ¯å…§å®¹</label>
        <textarea class="form-textarea" id="content" placeholder="è¼¸å…¥æ‚¨è¦ç™¼é€çš„è¨Šæ¯..." required oninput="updatePreview()"></textarea>
        <div style="font-size:12px; color:var(--sub); margin-top:4px;">
          å­—æ•¸ï¼š<span id="charCount">0</span> / 500
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">æ’ç¨‹ç™¼é€ï¼ˆé¸å¡«ï¼‰</label>
        <input class="form-input" type="datetime-local" id="scheduleTime">
      </div>

      <button type="submit" class="btn btn-primary btn-block">ç«‹å³ç™¼é€</button>
    </form>

    <!-- History -->
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>ç™¼é€æ™‚é–“</th>
            <th>ä¸»æ—¨</th>
            <th>å°è±¡</th>
            <th>ç‹€æ…‹</th>
            <th>æˆåŠŸ/ç¸½æ•¸</th>
          </tr>
        </thead>
        <tbody id="historyTbody">
          <tr>
            <td>2026-02-13 10:30</td>
            <td>æœ¬é€±èª²ç¨‹æé†’</td>
            <td>å…¨éƒ¨å­¸ç”Ÿ</td>
            <td><span class="badge badge-sent">å·²ç™¼é€</span></td>
            <td>25/25</td>
          </tr>
          <tr>
            <td>2026-02-10 09:00</td>
            <td>ç¹³è²»æé†’</td>
            <td>æŒ‡å®šå­¸ç”Ÿ</td>
            <td><span class="badge badge-sent">å·²ç™¼é€</span></td>
            <td>12/12</td>
          </tr>
          <tr>
            <td>2026-02-08 14:00</td>
            <td>æ´»å‹•é€šçŸ¥</td>
            <td>å…¨éƒ¨å­¸ç”Ÿ</td>
            <td><span class="badge badge-sent">å·²ç™¼é€</span></td>
            <td>30/30</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Preview -->
  <div class="preview-section">
    <div class="preview-title">è¨Šæ¯é è¦½</div>
    <div class="phone-mockup">
      <div class="message-bubble" id="previewBubble">
        <div id="previewSubject" style="font-weight:600; margin-bottom:8px;">è¨Šæ¯ä¸»æ—¨</div>
        <div id="previewContent">è¨Šæ¯å…§å®¹å°‡é¡¯ç¤ºåœ¨é€™è£¡...</div>
        <div class="message-meta">éŸ³æ¨‚è£œç¿’ç­</div>
      </div>
    </div>
  </div>
</div>

<script>
let selectedTemplate = 'custom';
let selectedRecipient = 'all';

const templates = {
  custom: { subject: '', content: '' },
  class: {
    subject: 'æœ¬é€±èª²ç¨‹æé†’',
    content: 'è¦ªæ„›çš„å®¶é•·æ‚¨å¥½ï¼š\n\næœ¬é€±èª²ç¨‹å®‰æ’å¦‚ä¸‹ï¼š\næ—¥æœŸï¼š[æ—¥æœŸ]\næ™‚é–“ï¼š[æ™‚é–“]\nè€å¸«ï¼š[è€å¸«å§“å]\n\nè«‹æº–æ™‚åˆ°ç­ä¸Šèª²ï¼Œè¬è¬ï¼\n\néŸ³æ¨‚è£œç¿’ç­ æ•¬ä¸Š'
  },
  payment: {
    subject: 'ç¹³è²»æé†’',
    content: 'è¦ªæ„›çš„å®¶é•·æ‚¨å¥½ï¼š\n\næœ¬æœˆå­¸è²»å°šæœªç¹³ç´ï¼Œæé†’æ‚¨ï¼š\né‡‘é¡ï¼šNT$ [é‡‘é¡]\nç¹³è²»æœŸé™ï¼š[æ—¥æœŸ]\n\nå¦‚å·²ç¹³è²»è«‹å¿½ç•¥æ­¤è¨Šæ¯ï¼Œè¬è¬ï¼\n\néŸ³æ¨‚è£œç¿’ç­ æ•¬ä¸Š'
  },
  event: {
    subject: 'æ´»å‹•é€šçŸ¥',
    content: 'è¦ªæ„›çš„å®¶é•·æ‚¨å¥½ï¼š\n\næœ¬ç­å°‡èˆ‰è¾¦[æ´»å‹•åç¨±]ï¼š\næ™‚é–“ï¼š[æ—¥æœŸæ™‚é–“]\nåœ°é»ï¼š[åœ°é»]\n\næ­¡è¿è¸´èºåƒåŠ ï¼\n\néŸ³æ¨‚è£œç¿’ç­ æ•¬ä¸Š'
  }
};

function selectTemplate(type) {
  selectedTemplate = type;
  document.querySelectorAll('.template-card').forEach(card => card.classList.remove('active'));
  event.target.closest('.template-card').classList.add('active');
  
  const template = templates[type];
  document.getElementById('subject').value = template.subject;
  document.getElementById('content').value = template.content;
  updatePreview();
}

function selectRecipient(type) {
  selectedRecipient = type;
  document.querySelectorAll('.recipient-chips .chip').forEach(chip => {
    chip.classList.remove('outline');
    chip.classList.add('outline');
  });
  event.target.classList.remove('outline');
  
  const studentSelect = document.getElementById('studentSelect');
  studentSelect.style.display = type === 'custom' ? 'block' : 'none';
}

function updatePreview() {
  const subject = document.getElementById('subject').value || 'è¨Šæ¯ä¸»æ—¨';
  const content = document.getElementById('content').value || 'è¨Šæ¯å…§å®¹å°‡é¡¯ç¤ºåœ¨é€™è£¡...';
  
  document.getElementById('previewSubject').textContent = subject;
  document.getElementById('previewContent').textContent = content;
  document.getElementById('charCount').textContent = content.length;
}

function sendMessage(e) {
  e.preventDefault();
  
  const subject = document.getElementById('subject').value;
  const content = document.getElementById('content').value;
  const scheduleTime = document.getElementById('scheduleTime').value;
  
  if (confirm(`ç¢ºå®šè¦ç™¼é€è¨Šæ¯çµ¦ã€Œ${selectedRecipient === 'all' ? 'å…¨éƒ¨å­¸ç”Ÿ' : selectedRecipient === 'active' ? 'åœ¨å­¸å­¸ç”Ÿ' : 'æŒ‡å®šå­¸ç”Ÿ'}ã€ï¼Ÿ`)) {
    // Mock send
    const now = new Date();
    const timeStr = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
    
    const tbody = document.getElementById('historyTbody');
    const newRow = tbody.insertRow(0);
    newRow.innerHTML = `
      <td>${scheduleTime || timeStr}</td>
      <td>${subject}</td>
      <td>${selectedRecipient === 'all' ? 'å…¨éƒ¨å­¸ç”Ÿ' : selectedRecipient === 'active' ? 'åœ¨å­¸å­¸ç”Ÿ' : 'æŒ‡å®šå­¸ç”Ÿ'}</td>
      <td><span class="badge ${scheduleTime ? 'badge-pending' : 'badge-sent'}">${scheduleTime ? 'æ’ç¨‹ä¸­' : 'å·²ç™¼é€'}</span></td>
      <td>--</td>
    `;
    
    alert(scheduleTime ? 'è¨Šæ¯å·²æ’ç¨‹ï¼' : 'è¨Šæ¯ç™¼é€æˆåŠŸï¼');
    document.getElementById('messageForm').reset();
    updatePreview();
    updateStats();
  }
}

function updateStats() {
  const rows = document.getElementById('historyTbody').rows;
  const today = new Date().toISOString().split('T')[0];
  let todayCount = 0;
  
  for (let row of rows) {
    if (row.cells[0].textContent.startsWith(today)) {
      todayCount++;
    }
  }
  
  document.getElementById('monthSent').textContent = rows.length;
  document.getElementById('todaySent').textContent = todayCount;
}

// Init
updatePreview();
updateStats();
</script>

</body>
</html>